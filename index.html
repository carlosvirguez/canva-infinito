<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Canvas Infinito</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.2.4/fabric.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<canvas id="c"></canvas>

<script>
  const canvas = new fabric.Canvas('c', { selection: false });
  const width = window.innerWidth;
  const height = window.innerHeight;
  canvas.setWidth(width);
  canvas.setHeight(height);

  // Fondo: textura papel
  fabric.Image.fromURL('https://cdn.pixabay.com/photo/2017/01/31/22/29/paper-2029236_1280.jpg', function(img) {
    const patternSourceCanvas = new fabric.StaticCanvas(null, { width: img.width, height: img.height });
    patternSourceCanvas.add(img);
    const pattern = new fabric.Pattern({
      source: patternSourceCanvas.getElement(),
      repeat: 'repeat',
    });
    canvas.setBackgroundColor(pattern, canvas.renderAll.bind(canvas));
  });

  // Añadir botones (textos)
  const sections = [
    { name: "Sobre mí", x: 100, y: 100 },
    { name: "Portafolio", x: 1000, y: 100 },
    { name: "Servicios", x: 2000, y: 100 },
    { name: "Fotografía", x: 3000, y: 100 },
    { name: "Diseño gráfico", x: 4000, y: 100 },
    { name: "Diseño web", x: 5000, y: 100 },
    { name: "Tips", x: 6000, y: 100 },
    { name: "Redes sociales", x: 7000, y: 100 },
    { name: "Contáctame", x: 8000, y: 100 }
  ];

  sections.forEach(sec => {
    const text = new fabric.Text(sec.name, {
      left: sec.x,
      top: sec.y,
      fontSize: 30,
      fill: "black",
      selectable: false,
      hoverCursor: "pointer"
    });
    text.on("mousedown", () => {
      // pan hacia la sección
      canvas.viewportTransform[4] = -sec.x + canvas.width / 2;
      canvas.viewportTransform[5] = -sec.y + canvas.height / 2;
      canvas.requestRenderAll();
    });
    canvas.add(text);
  });

  // Zoom suave con límites
  canvas.on("mouse:wheel", function(opt) {
    let zoom = canvas.getZoom();
    zoom *= 0.999 ** opt.e.deltaY;
    zoom = Math.min(Math.max(zoom, 0.5), 3); // límites
    canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);
    opt.e.preventDefault();
    opt.e.stopPropagation();
  });

  // Pan con mouse
  let isDragging = false;
  let lastPosX, lastPosY;

  canvas.on("mouse:down", function(opt) {
    isDragging = true;
    lastPosX = opt.e.clientX;
    lastPosY = opt.e.clientY;
  });

  canvas.on("mouse:move", function(opt) {
    if (isDragging) {
      const e = opt.e;
      const vpt = canvas.viewportTransform;
      vpt[4] += e.clientX - lastPosX;
      vpt[5] += e.clientY - lastPosY;
      canvas.requestRenderAll();
      lastPosX = e.clientX;
      lastPosY = e.clientY;
    }
  });

  canvas.on("mouse:up", function() {
    isDragging = false;
  });

  // Adaptar tamaño en móviles
  window.addEventListener('resize', () => {
    canvas.setWidth(window.innerWidth);
    canvas.setHeight(window.innerHeight);
    canvas.requestRenderAll();
  });
</script>
</body>
</html>
